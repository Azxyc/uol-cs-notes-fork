---
title: COMP109 - Relations - 7
tags: COMP109 Lectures
---
## Transitive Closure
Given a binary relation {% raw %}<pre>\(R\)</pre>{% endraw %} on a set {% raw %}<pre>\(A\)</pre>{% endraw %} the transitive closure {% raw %}<pre>\(R^*\)</pre>{% endraw %} of {% raw %}<pre>\(R\)</pre>{% endraw %} is the (uniquely determined) relation on {% raw %}<pre>\(A\)</pre>{% endraw %} with the following properties:

* {% raw %}<pre>\(R^*\)</pre>{% endraw %} is transitive.
* {% raw %}<pre>\(R\subseteq R^*\)</pre>{% endraw %}.

	All links you find in {% raw %}<pre>\(R\)</pre>{% endraw %} you should also find in {% raw %}<pre>\(R^*\)</pre>{% endraw %}.
	{:.info}
* If {% raw %}<pre>\(S\)</pre>{% endraw %} is a transitive relation on {% raw %}<pre>\(A\)</pre>{% endraw %} and {% raw %}<pre>\(R\subseteq S\)</pre>{% endraw %}, then {% raw %}<pre>\(R^*\subseteq S\)</pre>{% endraw %}.

### Simple Example
You are given the following links. What links are missing to make the relation transitive.

```mermaid
graph LR
a((a)) --> b((b))
b --> c((c))
```

As there is an arrow from {% raw %}<pre>\(a\)</pre>{% endraw %} to {% raw %}<pre>\(b\)</pre>{% endraw %} and an arrow from {% raw %}<pre>\(b\)</pre>{% endraw %} to {% raw %}<pre>\(c\)</pre>{% endraw %} there should be and arrow from {% raw %}<pre>\(a\)</pre>{% endraw %} to {% raw %}<pre>\(c\)</pre>{% endraw %} to make this transitive.

```mermaid
graph LR
a((a)) --> b((b))
b --> c((c))
a -.-> c
```

### Example 1
Let {% raw %}<pre>\(A=\{1,2,3\}\)</pre>{% endraw %}. Find the transitive closure of:

{% raw %}<pre>\[R=\{(1,1),(1,2),(1,3),(2,3),(3,1)\}\]</pre>{% endraw %}

This relation has the following graph:

```mermaid
graph LR
1((1)) --> 1
1 --> 2((2))
1 --> 3((3))
2 --> 3
3 --> 1
```

You should add the following links:

```mermaid
graph LR
1((1)) --> 1
1 --> 2((2))
1 --> 3((3))
2 --> 1
3 --> 2
2 --> 3
3 --> 1
3 --> 3
2 --> 2
```

## Transitivity and Composition
A relation {% raw %}<pre>\(S\)</pre>{% endraw %} is transitive if and only if {% raw %}<pre>\(S\circ S\subseteq S\)</pre>{% endraw %}. This is because:

{% raw %}<pre>\[S\circ S=\{(a,c)\vert \text{ exists } b \text{ such that } aSb \text{ and } bSc\}\]</pre>{% endraw %}

This is the definition of what the composition of a relation is.
{:.info}

Let {% raw %}<pre>\(S\)</pre>{% endraw %} be a relation. Set {% raw %}<pre>\(S^1=S,S^2=S\circ S,S^3=S\circ S\circ S\circ S\)</pre>{% endraw %} and so on.

### Theorem
Denote by {% raw %}<pre>\(S^*\)</pre>{% endraw %} the transitive closure of {% raw %}<pre>\(S\)</pre>{% endraw %}. Then {% raw %}<pre>\(xS^*y\)</pre>{% endraw %} if and only if there exists {% raw %}<pre>\(n>0\)</pre>{% endraw %} such that {% raw %}<pre>\(xS^ny\)</pre>{% endraw %}.

This theorem states that by repeating Warshall's algorithm on your matrix until there is no change then you will reach transitive closure for that relational matrix.
{:.info}

## Transitive Closure in Matrix Form
The relation {% raw %}<pre>\(R\)</pre>{% endraw %} on the set {% raw %}<pre>\(A=\{1,2,3,4,5\}\)</pre>{% endraw %} is represented by the matrix:

{% raw %}<pre>\[
\begin{bmatrix}
1&0&0&1&0\\
0&1&0&0&1\\
0&0&1&0&0\\
1&0&1&0&0\\
0&1&0&1&0
\end{bmatrix}
\]</pre>{% endraw %}

Determine the matrix {% raw %}<pre>\(R\circ R\)</pre>{% endraw %} and hence explain why {% raw %}<pre>\(R\)</pre>{% endraw %} is not transitive.

To compute this we transpose the row {% raw %}<pre>\(i\)</pre>{% endraw %} onto the column {% raw %}<pre>\(j\)</pre>{% endraw %} and see if there are two ones in the same position. If this is the case then the resultant matrix has a 1 in row {% raw %}<pre>\(i\)</pre>{% endraw %} and column {% raw %}<pre>\(j\)</pre>{% endraw %}. If not then there is a zero:

{% raw %}<pre>\[
\begin{bmatrix}
1&0&0&1&0\\
0&1&0&0&1\\
0&0&1&0&0\\
1&0&1&0&0\\
0&1&0&1&0
\end{bmatrix}
\begin{bmatrix}
1&0&0&1&0\\
0&1&0&0&1\\
0&0&1&0&0\\
1&0&1&0&0\\
0&1&0&1&0
\end{bmatrix}=
\begin{bmatrix}
1&0&1&1&0\\
0&1&0&1&1\\
0&0&1&0&0\\
1&0&1&1&0\\
1&1&1&0&1
\end{bmatrix}
\]</pre>{% endraw %}

{% raw %}<pre>\(R\)</pre>{% endraw %} is not transitive as {% raw %}<pre>\(R^2\neq R\)</pre>{% endraw %}

This is the same as Warshall's Algorithm. In this algorithm you iterate through every item in each column and row and each column and row. If there is a match you put a `1` in the resultant matrix and if there is not then you put a `0`.
{:.info}
